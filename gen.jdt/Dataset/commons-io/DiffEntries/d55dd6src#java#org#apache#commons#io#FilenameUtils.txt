Previous File: OUTPUT/commons-io/prevFiles/prev_d55dd6src#java#org#apache#commons#io#FilenameUtils.java
Revised File: OUTPUT/commons-io/revFiles/d55dd6src#java#org#apache#commons#io#FilenameUtils.java
DiffEntry: @@ -701,6 +701,7 @@
         int index = indexOfLastSeparator(filename);
-        if (prefix >= filename.length() || index < 0) {
+        int endIndex = index+separatorAdd;
+        if (prefix >= filename.length() || index < 0 || prefix >= endIndex) {
             return "";
         }
-        return filename.substring(prefix, index + separatorAdd);
+        return filename.substring(prefix, endIndex);
     }

