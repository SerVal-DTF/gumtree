Previous File: OUTPUT/commons-io/prevFiles/prev_d6beaasrc#main#java#org#apache#commons#io#IOUtils.java
Revised File: OUTPUT/commons-io/revFiles/d6beaasrc#main#java#org#apache#commons#io#IOUtils.java
DiffEntry: @@ -137,7 +137,7 @@
         // avoid security issues
-        final StringBuilderWriter buf = new StringBuilderWriter(4);
-        final PrintWriter out = new PrintWriter(buf);
-        out.println();
-        LINE_SEPARATOR = buf.toString();
-        out.close();
+        try (final StringBuilderWriter buf = new StringBuilderWriter(4); 
+                final PrintWriter out = new PrintWriter(buf)) {
+            out.println();
+            LINE_SEPARATOR = buf.toString();
+        }
     }

@@ -764,5 +764,6 @@
     public static byte[] toByteArray(final InputStream input) throws IOException {
-        final ByteArrayOutputStream output = new ByteArrayOutputStream();
-        copy(input, output);
-        return output.toByteArray();
+        try (final ByteArrayOutputStream output = new ByteArrayOutputStream()) {
+            copy(input, output);
+            return output.toByteArray();
+        }
     }

@@ -866,5 +867,6 @@
     public static byte[] toByteArray(final Reader input, final Charset encoding) throws IOException {
-        final ByteArrayOutputStream output = new ByteArrayOutputStream();
-        copy(input, output, encoding);
-        return output.toByteArray();
+        try (final ByteArrayOutputStream output = new ByteArrayOutputStream()) {
+            copy(input, output, encoding);
+            return output.toByteArray();
+        }
     }

@@ -1081,5 +1083,6 @@
     public static String toString(final InputStream input, final Charset encoding) throws IOException {
-        final StringBuilderWriter sw = new StringBuilderWriter();
-        copy(input, sw, encoding);
-        return sw.toString();
+        try (final StringBuilderWriter sw = new StringBuilderWriter()) {
+            copy(input, sw, encoding);
+            return sw.toString();
+        }
     }

@@ -1122,5 +1125,6 @@
     public static String toString(final Reader input) throws IOException {
-        final StringBuilderWriter sw = new StringBuilderWriter();
-        copy(input, sw);
-        return sw.toString();
+        try (final StringBuilderWriter sw = new StringBuilderWriter()) {
+            copy(input, sw);
+            return sw.toString();
+        }
     }

