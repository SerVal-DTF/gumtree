Previous File: OUTPUT/commons-io/prevFiles/prev_7c58d8src#main#java#org#apache#commons#io#output#DeferredFileOutputStream.java
Revised File: OUTPUT/commons-io/revFiles/7c58d8src#main#java#org#apache#commons#io#output#DeferredFileOutputStream.java
DiffEntry: @@ -133,3 +133,4 @@
      */
-    private DeferredFileOutputStream(final int threshold, final File outputFile, final String prefix, final String suffix, final File directory) {
+    private DeferredFileOutputStream(final int threshold, final File outputFile, final String prefix,
+                                     final String suffix, final File directory) {
         super(threshold);

@@ -178,3 +179,8 @@
         final FileOutputStream fos = new FileOutputStream(outputFile);
-        memoryOutputStream.writeTo(fos);
+        try {
+            memoryOutputStream.writeTo(fos);
+        } catch (IOException e){
+            fos.close();
+            throw e;
+        }
         currentOutputStream = fos;

