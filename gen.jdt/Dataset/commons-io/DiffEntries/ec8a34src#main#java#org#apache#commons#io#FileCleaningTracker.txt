Previous File: OUTPUT/commons-io/prevFiles/prev_ec8a34src#main#java#org#apache#commons#io#FileCleaningTracker.java
Revised File: OUTPUT/commons-io/revFiles/ec8a34src#main#java#org#apache#commons#io#FileCleaningTracker.java
DiffEntry: @@ -21,2 +21,3 @@
 import java.lang.ref.ReferenceQueue;
+import java.util.ArrayList;
 import java.util.Collection;

@@ -24,2 +25,3 @@
 import java.util.HashSet;
+import java.util.List;
 

@@ -52,2 +54,6 @@
     final Collection<Tracker> trackers = Collections.synchronizedSet(new HashSet<Tracker>()); // synchronized
+    /**
+     * Collection of File paths that failed to delete.
+     */
+    final List<String> deleteFailures = Collections.synchronizedList(new ArrayList<String>());
     /**

@@ -153,2 +159,12 @@
     /**
+     * Return the file paths that failed to delete.
+     *
+     * @return the file paths that failed to delete
+     * @since Commons IO 2.0
+     */
+    public List<String> getDeleteFailures() {
+        return deleteFailures;
+    }
+
+    /**
      * Call this method to cause the file cleaner thread to terminate when

@@ -207,3 +223,5 @@
                     trackers.remove(tracker);
-                    tracker.delete();
+                    if (!tracker.delete()) {
+                        deleteFailures.add(tracker.getPath());
+                    }
                     tracker.clear();

@@ -246,2 +264,11 @@
         /**
+         * Return the path.
+         *
+         * @return the path
+         */
+        public String getPath() {
+            return path;
+        }
+
+        /**
          * Deletes the file associated with this tracker instance.

