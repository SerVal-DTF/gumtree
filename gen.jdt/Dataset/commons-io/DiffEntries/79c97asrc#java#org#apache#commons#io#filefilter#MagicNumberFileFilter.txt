Previous File: OUTPUT/commons-io/prevFiles/prev_79c97asrc#java#org#apache#commons#io#filefilter#MagicNumberFileFilter.java
Revised File: OUTPUT/commons-io/revFiles/79c97asrc#java#org#apache#commons#io#filefilter#MagicNumberFileFilter.java
DiffEntry: @@ -211,3 +211,4 @@
         
-        this.magicNumbers = magicNumber;
+        this.magicNumbers = new byte[magicNumber.length];
+        System.arraycopy(magicNumber, 0, this.magicNumbers, 0, magicNumber.length);
         this.byteOffset = offset;

@@ -239,3 +240,6 @@
                 randomAccessFile.seek(byteOffset);
-                randomAccessFile.read(fileBytes);
+                int read = randomAccessFile.read(fileBytes);
+                if (read != magicNumbers.length) {
+                    return false;
+                }
                 return Arrays.equals(this.magicNumbers, fileBytes);

